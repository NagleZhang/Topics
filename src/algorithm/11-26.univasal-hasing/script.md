# https://www.khanacademy.org/computing/computer-science/cryptography/modarithmetic/a/what-is-modular-arithmetic
#### 这是一个集合, 它包含了世界上任意一种类型的对象的, 我们将其定义为集合 U.
#### hash 的作用, 是将这个集合的内容
#### 映射到一个更小的哈希表, 大小为M,以便于程序使用
#### 我们引入一个质数 P
#### 取在 U 集合当中的任意一个对象
#### 执行 mod p, 将其映射到 p 的范围内.
#### 然后再执行 mod m, 将其映射到 m 的范围内.
#### 我们将左侧的 k 乘以 a 再加上 b , 就得到了我们的 univasal hashing 的公式
#### 其中 a 和 b 都在质数当中. a != 0
#### 也就是 a = { 1, 2, 3 ... p-1} ,b = { 0, 1, 2, 3 ... p-1} 
#### 这样, 我们就有多个hash 函数.
#### 譬如说, 
#### 1乘以 k + 0 mod p 再 mod m
#### 2乘以 k + 1 mod p 再 mod m
#### 3 乘以 k + 2 mod p 再 mod m
#### 以此类推
#### 直到 (p-1)乘以k+(p-1) mod p 再 mod m
#### 如此,我们就能够得出这些 hash 函数的定义
#### H p, m = h(a,b) 其中 a 属于 p 的非零整数集, 而 b 属于 p 的整数集合.
#### 这些hash函数的数量为: p*(p-1)
#### 我们的 univasal hashing 函数,就是每次随机的从中抽取一个函数进行 hash.

#### 有了这个函数以后, 我们要回答的第一个问题会是, 为什么中间是一个质数 prime number ?

#### 第一个原因, 就是分布情况.
#### 我们来看看一个质数p=5的情况, 
#### 这个表格是 任意一个a,和 k 相乘并 mod 5 的情况.
#### 可以看到, 我们任意取一列, a = 1, k = 1, 2, 3, 4  都不想等. 或者说不冲突. 
#### 这个表格看起来, 非常的均匀. 

#### 然后我们再看一个反面例子 p == 6
#### a = 3 , k 在 1, 3, 5 的时候, mod 5 都等于 3
#### a = 2 , k 等于 1,4 的时候, mod 5 都等于2. 
#### 就是说, 无论 a = 2, 还是等于 3, 都会发生碰撞的情况.
#### 从整个表格也可以看到, 它们的分布非常的不均匀.

#### 而当分布足够的均匀, 也就是无论 a 取任意一个数字, univasal hasing 都不会碰撞.
#### 换句话说, 也就是我在 U 集合的对象, 投影到 prime 时, 不会碰撞
#### 可以证明吗?
#### 我们假设图中的碰撞情况发生了, 那么其用形式化的语言来描述就是
#### a*x1 + b = a*x2 + b 
#### a(x1 - x2) = 0 mod p
#### 因为 p 是质数, 所以除了 1 和它本身没有公约数.
#### 并且 x1 != x2, 
#### 所以 a(x1 - x2) = 0 mod p ,不成立
#### 也就是说, 它们不会碰撞.

#### 从上面的例子我们可以看到, 质数作为模数,
#### 有以下几个作用
#### 1. hash 在 mod 到 p 的时候, 是不会发生碰撞的.
#### 2. 因为不会碰撞,所以 hash 的分布比较均匀, 换句话说, 保证每个位置的概率都是一样的.

#### 在经过 hash function 的前半段 (a*k + b) mod p 以后.
#### 我们来看看后半段 p mod m ,
#### 因为它是从一个大的范围
#### 进入一个小的范围.
#### 所以碰撞是必然的.

#### 那么, 我们的 univasal hashfunction 什么情况下会发生碰撞呢?碰撞的概率会有多少呢?
#### 假设我们前面投影到 p 上面的数的结果 (a*k+b) mod p = ku 
#### 那么与 ku mod n 的情况下, 能够与 ku 产生碰撞的就是: ku + n , ku + 2n , ku -n ...

#### 这样, 我们能够产生碰撞的数量就会是: p/m - 1, 而这些数都在 p 轴上.
#### 所以发生碰撞的概率我们可以表示为
#### (p/m - 1) / (p-1)
#### 进一步化解, 我们可以知道 p/m - 1) / (p-1 l)
#### 是一定小雨 p-1)/m /(p-1)
#### 而这个公式, 等于 1/m
#### 所以我们可以的出, 我们的 univasal hashing 函数的碰撞概率, 是小于 1/m 的.
